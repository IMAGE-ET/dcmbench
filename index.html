<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Dcmbench : Javascript DICOM parser benchmark.">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Dcmbench</title>

<link type="text/css" rel="stylesheet" href="style.css" />

<!-- Third party -->
<script src="dcmjs/libs/jquery-1.11.0.min.js"></script>
<script src="benchmark/lodash.js"></script>
<script src="benchmark/benchmark.js"></script>
<!-- local -->
<script src="dicomBench.js"></script>

<!-- dcmjs -->
<script src="dcmjs/libs/dcmjs-nico.js"></script>
<script src="dcmjs/utils.js"></script>
<script type="text/javascript">
parse_0 = function (response) {
  // avoid console log
  var dumpLines = [];
  Module.print = function (s) {
    dumpLines.push(s);
  }
  // temp file name
  var fileName = 'temp';
  // write to FileSystem
  var content = new Int8Array(response);
  FS.writeFile(fileName, content, {encoding: "binary"});
  // run dcmtk command
  dcmjs.utils.execute('dcmdump', [fileName]);
};
var function_0 = {
  "name": "dcmjs",
  "func": parse_0
};
</script>

<!-- chafey -->
<script src="dicomParser/dicomParser.min.js"></script>
<script type="text/javascript">
parse_1 = function (response) {
  // convert to uint
  var content = new Uint8Array(response);
  // parse
  var dataSet = dicomParser.parseDicom(content);
};
var function_1 = {
  "name": "dicomParser",
  "func": parse_1
};
</script>

<!-- dwv -->
<script src="dwv/dwv-0.10.1.min.js"></script>
<script type="text/javascript">
parse_2 = function (response) {
  // setup the dicom parser
  var dwvParser = new dwv.dicom.DicomParser();
  // parse the buffer
  dwvParser.parse(response);
};
var function_2 = {
  "name": "dwv",
  "func": parse_2
};
</script>

<!-- daikon -->
<script src="daikon/daikon-min.js"></script>
<script type="text/javascript">
parse_3 = function (response) {
    // get data view
    var data = new DataView(response);
    // parse the data
    var image = daikon.Series.parseImage(data);
};
var function_3 = {
  "name": "daikon",
  "func": parse_3
};
</script>

<!-- real business -->
<script type="text/javascript">

// default test data
var defaultTestData = [ { "name": "osirix-toutatix-100",
  "url": "https://github.com/ivmartel/dcmbench/blob/master/data/osirix-toutatix-100.dcm?raw=true" },
  { "name": "osirix-goudurix",
  "url": "https://github.com/ivmartel/dcmbench/blob/master/data/osirix-goudurix.dcm?raw=true" },
  { "name": "dicompyler-ct.0",
  "url": "https://github.com/ivmartel/dcmbench/blob/master/data/dicompyler-ct.0.dcm?raw=true" },
  { "name": "gdcm-CR-MONO1-10-chest",
  "url": "https://github.com/ivmartel/dcmbench/blob/master/data/gdcm-CR-MONO1-10-chest.dcm?raw=true" },
  { "name": "gdcm-CT-MONO2-8-abdo",
  "url": "https://github.com/ivmartel/dcmbench/blob/master/data/gdcm-CT-MONO2-8-abdo.dcm?raw=true" },
  { "name": "gdcm-US-RGB-8-epicard",
  "url": "https://github.com/ivmartel/dcmbench/blob/master/data/gdcm-US-RGB-8-epicard.dcm?raw=true" },
  { "name": "gdcm-US-RGB-8-esopecho",
  "url": "https://github.com/ivmartel/dcmbench/blob/master/data/gdcm-US-RGB-8-esopecho.dcm?raw=true" }
];

// create DicomBench object
var dicomBench = new DicomBench([
  function_0, function_1, function_2, function_3
  ], defaultTestData
  );

// handle launch
onBenchButton = function () {
  // run bench
  if ( dicomBench.getStatus() === "ready" ||
    dicomBench.getStatus() === "done" ||
    dicomBench.getStatus() === "cancelled" ) {
    // run bench
    dicomBench.run();
  }
  else if ( dicomBench.getStatus() === "running" ) {
    // cancel bench
    dicomBench.cancel();
  }
}

// last minute
$( document ).ready(function() {
  // output user agent
  var pAgent = document.createElement("p");
  pAgent.appendChild(document.createTextNode("User agent: " + navigator.userAgent))
  var resDiv = document.getElementById("browser");
  resDiv.appendChild(pAgent);
});
</script>

    </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/ivmartel/dcmbench">View on GitHub</a>

          <h1 id="project_title">Dcmbench</h1>
          <h2 id="project_tagline">Javascript DICOM parser benchmark.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/ivmartel/dcmbench/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/ivmartel/dcmbench/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">

  <p>Note: this online version only works with Google Chrome launched with <code>--disable-web-security</code>.</p>

  <div id="browser"></div>

  <div id="bench-toolbar">
    <button id="bench-button" onclick="onBenchButton()">Launch</button>
    <p id="bench-status">Ready</p>
  </div>
  <div id="bench-results"></div>

      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Dcmbench maintained by <a href="https://github.com/ivmartel">ivmartel</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>



  </body>
</html>
